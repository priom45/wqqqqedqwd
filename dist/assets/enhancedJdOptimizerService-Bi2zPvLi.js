var O=Object.defineProperty;var J=(S,e,a)=>e in S?O(S,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):S[e]=a;var N=(S,e,a)=>J(S,typeof e!="symbol"?e+"":e,a);import{E as M,o as F,F as V}from"./index-CTlU0u05.js";const G={light:{addMissingKeywords:!0,rewriteBullets:!1,restructureSections:!1,generateSummary:!1,maxChangesPerSection:2},standard:{addMissingKeywords:!0,rewriteBullets:!0,restructureSections:!1,generateSummary:!0,maxChangesPerSection:5},aggressive:{addMissingKeywords:!0,rewriteBullets:!0,restructureSections:!0,generateSummary:!0,maxChangesPerSection:10}};class U{static async analyzeGaps(e,a,r){const i={resumeText:a,resumeData:e,jobDescription:r,extractionMode:"TEXT"},s=await M.calculateScore(i),c=this.analyzeTierGaps(s.tier_scores),o=this.analyzeBig5Gaps(s.critical_metrics),n=this.prioritizeImprovements(c,o);return{beforeScore:s,tierGaps:c,big5Gaps:o,prioritizedImprovements:n,redFlags:s.red_flags,missingKeywords:s.missing_keywords_enhanced}}static analyzeTierGaps(e){const a=[],r=[["basic_structure",1],["content_structure",2],["experience",3],["education",4],["certifications",5],["skills_keywords",6],["projects",7],["red_flags",7],["competitive",8],["culture_fit",9],["qualitative",10]];for(const[i,s]of r){const c=e[i];if(c.percentage<100){const o=this.extractFailingMetrics(c,s);a.push({tierNumber:s,tierName:c.tier_name,currentScore:c.score,maxScore:c.max_score,percentage:c.percentage,weight:c.weight,failingMetrics:o})}}return a.sort((i,s)=>s.weight-i.weight)}static extractFailingMetrics(e,a){const r=[];return e.top_issues.forEach((i,s)=>{r.push({metricId:a*100+s+1,metricName:`${e.tier_name} Issue ${s+1}`,currentValue:"Below threshold",expectedValue:"Pass",impact:e.weight/e.top_issues.length,recommendation:i})}),r}static analyzeBig5Gaps(e){const a=[],r=e.jd_keywords_match;r.percentage<100&&a.push({metric:"jd_keywords_match",metricName:"JD Keywords Match",currentScore:r.score,maxScore:r.max_score,gap:r.max_score-r.score,priority:r.percentage<50?"critical":r.percentage<70?"high":"medium",improvements:["Add missing JD keywords to skills section","Include keywords in experience bullet points","Use exact terminology from job description"]});const i=e.technical_skills_alignment;i.percentage<100&&a.push({metric:"technical_skills_alignment",metricName:"Technical Skills Alignment",currentScore:i.score,maxScore:i.max_score,gap:i.max_score-i.score,priority:i.percentage<50?"critical":i.percentage<70?"high":"medium",improvements:["Add missing technical skills from JD","Categorize skills by type (languages, frameworks, tools)","Demonstrate skills in project descriptions"]});const s=e.quantified_results_presence;s.percentage<100&&a.push({metric:"quantified_results_presence",metricName:"Quantified Results",currentScore:s.score,maxScore:s.max_score,gap:s.max_score-s.score,priority:s.percentage<50?"critical":s.percentage<70?"high":"medium",improvements:['Add percentages to achievements (e.g., "increased by 25%")',"Include dollar amounts where applicable","Quantify team sizes, user counts, or project scale"]});const c=e.job_title_relevance;c.percentage<100&&a.push({metric:"job_title_relevance",metricName:"Job Title Relevance",currentScore:c.score,maxScore:c.max_score,gap:c.max_score-c.score,priority:c.percentage<50?"critical":c.percentage<70?"high":"medium",improvements:["Align job titles with target role terminology","Highlight relevant title keywords","Add target role to professional summary"]});const o=e.experience_relevance;o.percentage<100&&a.push({metric:"experience_relevance",metricName:"Experience Relevance",currentScore:o.score,maxScore:o.max_score,gap:o.max_score-o.score,priority:o.percentage<50?"critical":o.percentage<70?"high":"medium",improvements:["Rewrite bullets to emphasize JD-relevant experience","Highlight transferable skills","Add context connecting experience to target role"]});const n={critical:0,high:1,medium:2};return a.sort((l,t)=>n[l.priority]-n[t.priority])}static prioritizeImprovements(e,a){const r=[];return a.forEach((i,s)=>{i.improvements.forEach((c,o)=>{r.push({priority:s*10+o,tier:0,tierName:"Big 5 Critical",metricName:i.metricName,impact:i.gap*2,recommendation:c,isBig5:!0})})}),e.forEach(i=>{i.failingMetrics.forEach((s,c)=>{r.push({priority:100+i.tierNumber*10+c,tier:i.tierNumber,tierName:i.tierName,metricName:s.metricName,impact:s.impact,recommendation:s.recommendation,isBig5:!1})})}),r.sort((i,s)=>i.isBig5!==s.isBig5?i.isBig5?-1:1:s.impact!==i.impact?s.impact-i.impact:i.priority-s.priority)}static getImprovementSummary(e){const{tierGaps:a,big5Gaps:r,prioritizedImprovements:i}=e,s=r.filter(l=>l.priority==="critical").length,c=a.filter(l=>l.percentage<60).length;let n=`Found ${i.length} potential improvements. `;return s>0&&(n+=`${s} critical Big 5 metric(s) need attention. `),c>0&&(n+=`${c} tier(s) scoring below 60%. `),n}}const W=new Set(["javascript","typescript","python","java","c++","c#","c","go","golang","rust","ruby","php","swift","kotlin","scala","r","matlab","perl","lua","dart","elixir","clojure","haskell","sql","plsql","tsql","nosql","shell","bash","powershell","groovy","objective-c","assembly","cobol","fortran","vb.net","visual basic","f#","react","react.js","reactjs","angular","angularjs","vue","vue.js","vuejs","svelte","next.js","nextjs","next","nuxt","nuxt.js","gatsby","remix","astro","solid","solidjs","preact","lit","alpine.js","htmx","ember","ember.js","backbone","backbone.js","jquery","redux","mobx","zustand","recoil","jotai","xstate","rxjs","html","html5","css","css3","sass","scss","less","stylus","tailwind","tailwindcss","bootstrap","material-ui","mui","chakra-ui","chakra","styled-components","emotion","antd","ant design","bulma","foundation","semantic-ui","uikit","materialize","webflow","node.js","nodejs","node","express","express.js","expressjs","nest.js","nestjs","fastify","koa","hapi","django","flask","fastapi","spring","spring boot","springboot",".net","dotnet","asp.net","rails","ruby on rails","laravel","symfony","codeigniter","gin","echo","fiber","actix","rocket","phoenix","ktor","micronaut","quarkus","dropwizard","play framework","struts","grails","mysql","postgresql","postgres","mongodb","redis","elasticsearch","elastic","dynamodb","cassandra","sqlite","oracle","mariadb","couchdb","couchbase","neo4j","firebase","supabase","prisma","sequelize","mongoose","typeorm","knex","drizzle","sqlalchemy","hibernate","jpa","jdbc","memcached","influxdb","timescaledb","cockroachdb","planetscale","fauna","arangodb","rethinkdb","aws","amazon web services","azure","microsoft azure","gcp","google cloud","google cloud platform","docker","kubernetes","k8s","terraform","ansible","puppet","chef","jenkins","ci/cd","cicd","github actions","gitlab ci","gitlab","circleci","travis","travis ci","argo","argocd","helm","prometheus","grafana","datadog","splunk","elk","logstash","kibana","nginx","apache","serverless","lambda","ec2","s3","rds","cloudformation","pulumi","cloudflare","vercel","netlify","heroku","digitalocean","linode","vagrant","packer","consul","vault","istio","envoy","linkerd","git","github","gitlab","bitbucket","svn","subversion","mercurial","jira","confluence","slack","trello","asana","notion","linear","monday","basecamp","azure devops","tfs","figma","sketch","adobe xd","invision","zeplin","framer","principle","photoshop","illustrator","canva","balsamiq","axure","postman","insomnia","swagger","openapi","rest","restful","rest api","graphql","grpc","websocket","websockets","soap","api","apis","microservices","oauth","oauth2","jwt","json","xml","yaml","protobuf","thrift","avro","jest","mocha","chai","cypress","playwright","selenium","webdriver","puppeteer","testing library","react testing library","enzyme","junit","testng","pytest","unittest","rspec","jasmine","karma","vitest","supertest","msw","storybook","chromatic","appium","detox","xctest","espresso","mockito","sinon","nock","machine learning","ml","deep learning","dl","ai","artificial intelligence","tensorflow","pytorch","keras","scikit-learn","sklearn","pandas","numpy","scipy","matplotlib","seaborn","plotly","jupyter","notebook","colab","data science","data analytics","data analysis","big data","hadoop","spark","pyspark","hive","pig","kafka","airflow","luigi","dbt","tableau","power bi","powerbi","looker","metabase","superset","qlik","sas","spss","stata","nlp","natural language processing","computer vision","cv","opencv","huggingface","transformers","bert","gpt","llm","langchain","openai","anthropic","react native","flutter","ionic","cordova","phonegap","xamarin","swift ui","swiftui","jetpack compose","android","ios","mobile","expo","capacitor","webpack","vite","rollup","parcel","esbuild","swc","babel","eslint","prettier","tslint","stylelint","npm","yarn","pnpm","bun","maven","gradle","ant","pip","poetry","pipenv","conda","composer","bundler","cargo","nuget","cocoapods","carthage","spm","lerna","nx","turborepo","agile","scrum","kanban","lean","devops","devsecops","sre","ci/cd","continuous integration","continuous deployment","continuous delivery","tdd","bdd","ddd","pair programming","mob programming","code review","gitflow","trunk based development","microservices","monolith","serverless","event-driven","cqrs","event sourcing","saga pattern","mvc","mvvm","mvp","clean architecture","hexagonal","onion architecture","ddd","domain driven design","solid","design patterns","oop","functional programming","fp","reactive programming","security","cybersecurity","infosec","owasp","penetration testing","pen testing","vulnerability","encryption","ssl","tls","https","firewall","waf","iam","rbac","sso","saml","ldap","active directory","kerberos","linux","unix","ubuntu","centos","debian","redhat","windows","macos","vim","neovim","emacs","vscode","visual studio","intellij","pycharm","webstorm","eclipse","netbeans","xcode","android studio","wordpress","drupal","joomla","contentful","strapi","sanity","ghost","shopify","magento","woocommerce","bigcommerce","prestashop","opencart","sap","salesforce","servicenow","dynamics","oracle erp","workday","hubspot","zendesk","freshdesk","intercom","blockchain","web3","ethereum","solidity","smart contracts","nft","defi","ipfs","hardhat","truffle","ganache","metamask","ethers.js","web3.js","unity","unreal","unreal engine","godot","three.js","webgl","opengl","directx","vulkan","metal","blender","maya","iot","embedded","arduino","raspberry pi","esp32","mqtt","zigbee","bluetooth","ble","lora","rtos","freertos","rabbitmq","activemq","zeromq","kafka","pulsar","nats","celery","bull","sidekiq","resque"]),B=new Set(["improve","participate","write","debug","proficiency","troubleshoot","convert","identify","prepare","leverage","prioritize","stay","work","working","worked","develop","developing","developed","build","building","built","create","creating","created","implement","implementing","implemented","manage","managing","managed","deliver","delivering","delivered","ensure","ensuring","ensured","provide","providing","provided","support","supporting","supported","maintain","maintaining","maintained","collaborate","collaborating","collaborated","analyze","analyzing","analyzed","design","designing","designed","test","testing","tested","review","reviewing","reviewed","contribute","contributing","contributed","explore","exploring","explored","learn","learning","learned","understand","understanding","understood","communicate","communicating","communicated","present","presenting","presented","lead","leading","led","coordinate","coordinating","coordinated","assist","assisting","assisted","help","helping","helped","utilize","utilizing","utilized","apply","applying","applied","execute","executing","executed","drive","driving","driven","achieve","achieving","achieved","optimize","optimizing","optimized","enhance","enhancing","enhanced","resolve","resolving","resolved","perform","performing","performed","establish","establishing","established","define","defining","defined","evaluate","evaluating","evaluated","monitor","monitoring","monitored","track","tracking","tracked","report","reporting","reported","document","documenting","documented","train","training","trained","mentor","mentoring","mentored","coach","coaching","coached","facilitate","facilitating","facilitated","organize","organizing","organized","plan","planning","planned","schedule","scheduling","scheduled","research","researching","researched","investigate","investigating","investigated","diagnose","diagnosing","diagnosed","fix","fixing","fixed","update","updating","updated","upgrade","upgrading","upgraded","migrate","migrating","migrated","deploy","deploying","deployed","launch","launching","launched","release","releasing","released","publish","publishing","published","integrate","integrating","integrated","automate","automating","automated","streamline","streamlining","streamlined","scale","scaling","scaled","refactor","refactoring","refactored","gurugram","gurgaon","bangalore","bengaluru","hyderabad","chennai","mumbai","pune","delhi","noida","kolkata","ahmedabad","jaipur","lucknow","chandigarh","indore","bhopal","nagpur","visakhapatnam","coimbatore","kochi","trivandrum","mysore","mangalore","surat","vadodara","rajkot","nashik","aurangabad","goa","india","usa","uk","canada","australia","germany","singapore","dubai","uae","remote","onsite","hybrid","office","wfh","work from home","english","hindi","spanish","french","german","mandarin","chinese","japanese","korean","arabic","portuguese","russian","italian","dutch","swedish","norwegian","danish","finnish","polish","turkish","thai","vietnamese","indonesian","malay","tagalog","tamil","telugu","kannada","malayalam","marathi","gujarati","punjabi","bengali","urdu","peer","peers","team","teams","company","companies","business","businesses","client","clients","customer","customers","user","users","stakeholder","stakeholders","project","projects","product","products","service","services","solution","solutions","system","systems","process","processes","workflow","workflows","pipeline","pipelines","ability","abilities","capable","capability","capabilities","able","experience","experiences","experienced","knowledge","knowledgeable","expertise","expert","skills","skill","skilled","proficient","excellent","good","great","strong","solid","proven","basic","advanced","intermediate","beginner","senior","junior","mid","lead","principal","staff","intern","internship","fresher","entry","level","years","year","months","month","weeks","week","days","day","hours","hour","time","deadline","deadlines","milestone","milestones","deliverable","deliverables","requirement","requirements","specification","specifications","feature","features","functionality","functionalities","module","modules","component","components","interface","interfaces","platform","platforms","environment","environments","infrastructure","architecture","framework","frameworks","library","libraries","tool","tools","technology","technologies","software","hardware","application","applications","app","apps","website","websites","web","mobile","desktop","frontend","backend","fullstack","full-stack","full stack","devops","data","database","cloud","server","servers","network","networks","frontend intern","backend intern","software intern","web intern","developer","developers","engineer","engineers","programmer","programmers","coder","coders","architect","architects","manager","managers","analyst","analysts","specialist","specialists","consultant","consultants","coordinator","coordinators","administrator","administrators","admin","admins","officer","officers","executive","executives","director","directors","vp","vice president","cto","ceo","cfo","coo","cio","head","heads","bachelor","bachelors","master","masters","phd","doctorate","degree","degrees","diploma","diplomas","certificate","certificates","certification","certifications","certified","computer science","computer engineering","information technology","it","engineering","science","arts","commerce","graduate","graduates","undergraduate","undergraduates","postgraduate","postgraduates","mba","btech","bsc","mtech","msc","be","me","bca","mca","college","university","institute","school","education","academic","academics","coursework","course","courses","class","classes","cgpa","gpa","percentage","marks","grade","grades","responsibilities","responsibility","qualifications","qualification","requirements","requirement","required","preferred","mandatory","optional","nice to have","must have","education","benefits","benefit","perks","perk","overview","description","summary","duties","duty","position","positions","role","roles","job","jobs","career","careers","opportunity","opportunities","opening","openings","vacancy","vacancies","apply","submit","send","contact","reach","location","locations","salary","salaries","compensation","package","ctc","lpa","about","company","us","we","our","join","looking","seeking","hiring","recruiting","passionate","motivated","driven","focused","dedicated","committed","enthusiastic","eager","willing","ready","able","csat","nps","kpi","kpis","roi","p&l","okr","okrs","sprint","sprints","velocity","burndown","backlog","epic","epics","story","stories","ticket","tickets","issue","issues","bug","bugs","defect","defects","incident","incidents","sla","slas","uptime","availability","reliability","scalability","performance","efficiency","productivity","quality","accuracy","precision","throughput","latency","response time","load time","relevant","related","similar","equivalent","comparable","minimum","maximum","at least","up to","more than","less than","over","under","above","below","approximately","around","about","roughly","nearly","almost","plus","bonus","extra","additional","other","etc","and","or","the","a","an","is","are","was","were","be","been","being","have","has","had","do","does","did","will","would","could","should","may","might","must","shall","can","need","want","like","love","prefer","enjoy","relevant internship experience","production-grade","production grade","performance-focused","performance focused","automotive software","secure","scalable","reliable","robust","efficient","effective","innovative","creative","detail","details","detail-oriented","detail oriented","self-motivated","self motivated","self-starter","self starter","team player","problem solver","problem-solver","fast learner","quick learner","hard worker","hard-working","hardworking","proactive","hands-on","hands on","google","facebook","meta","amazon","microsoft","apple","netflix","uber","airbnb","twitter","x","linkedin","salesforce","oracle","ibm","intel","cisco","vmware","dell","hp","adobe","nvidia","amd","qualcomm","samsung","sony","tcs","infosys","wipro","cognizant","accenture","deloitte","kpmg","ey","pwc","capgemini","hcl","tech mahindra","mindtree","ltts","mphasis","hexaware","cyient","persistent","zensar","birlasoft","sonata","niit","mastek"]);function P(S){if(!S||typeof S!="string")return!1;const e=S.toLowerCase().trim();return e.length<1||e.length>30||e.includes(`
`)||e.includes("\r")||e.includes("  ")||B.has(e)?!1:!!(W.has(e)||/^[a-z]+\.js$/i.test(e)||/^[a-z]+js$/i.test(e)||/^[a-z]+-js$/i.test(e)||/^[a-z]+\.(io|ai|dev|app)$/i.test(e))}function q(S){if(!S)return[];const e=/\b(react\.?js|angular\.?js|vue\.?js|next\.?js|nuxt\.?js|node\.?js|nest\.?js|express\.?js|react|angular|vue|svelte|gatsby|remix|astro|typescript|javascript|python|java|golang|go|rust|ruby|php|swift|kotlin|scala|c\+\+|c#|\.net|dotnet|aws|azure|gcp|docker|kubernetes|k8s|terraform|ansible|jenkins|git|github|gitlab|jira|confluence|mysql|postgresql|postgres|mongodb|redis|elasticsearch|dynamodb|cassandra|sqlite|oracle|firebase|supabase|graphql|rest|restful|api|microservices|kafka|rabbitmq|html5?|css3?|sass|scss|less|tailwind|bootstrap|webpack|vite|rollup|babel|eslint|jest|cypress|selenium|playwright|puppeteer|mocha|chai|junit|pytest|agile|scrum|kanban|devops|devsecops|ci\/cd|cicd|machine learning|ml|deep learning|ai|tensorflow|pytorch|pandas|numpy|jupyter|power bi|tableau|figma|sketch|postman|swagger|linux|unix|bash|vim|vscode)\b/gi,a=S.match(e)||[];return[...new Set(a.map(i=>i.toLowerCase()))].filter(i=>P(i))}const R={development:["Engineered","Architected","Developed","Built","Implemented","Designed","Created","Constructed","Programmed","Coded"],leadership:["Spearheaded","Led","Directed","Orchestrated","Championed","Drove","Pioneered","Initiated","Headed","Guided"],improvement:["Optimized","Enhanced","Streamlined","Accelerated","Transformed","Revamped","Modernized","Upgraded","Refined","Boosted"],analysis:["Analyzed","Evaluated","Assessed","Investigated","Diagnosed","Identified","Researched","Examined","Audited","Reviewed"],collaboration:["Collaborated","Partnered","Coordinated","Facilitated","Liaised","Integrated","Unified","Aligned","Synergized"],delivery:["Delivered","Launched","Deployed","Released","Shipped","Executed","Completed","Achieved","Accomplished","Finalized"],management:["Managed","Oversaw","Supervised","Administered","Controlled","Governed","Regulated","Maintained"],innovation:["Innovated","Invented","Conceptualized","Devised","Formulated","Established","Founded","Introduced"]},$={worked:"Developed",work:"Develop",working:"Developing",helped:"Collaborated",help:"Collaborate",helping:"Collaborating",assisted:"Supported",assist:"Support",assisting:"Supporting",responsible:"Managed","responsible for":"Managed",duties:"Executed",did:"Completed",do:"Execute",doing:"Executing",made:"Created",make:"Create",making:"Creating",got:"Achieved",get:"Obtain",getting:"Obtaining",used:"Leveraged",use:"Leverage",using:"Utilizing",was:"Served as",were:"Served as",had:"Maintained",have:"Maintain",having:"Maintaining",involved:"Contributed",participated:"Engaged",participate:"Engage",handled:"Managed",handle:"Manage",handling:"Managing",dealt:"Resolved",deal:"Resolve",dealing:"Resolving",wrote:"Authored",write:"Author",writing:"Authoring",ran:"Executed",run:"Execute",running:"Executing",set:"Established",setting:"Establishing",put:"Implemented",putting:"Implementing",took:"Assumed",take:"Assume",taking:"Assuming",gave:"Provided",give:"Provide",giving:"Providing",saw:"Identified",see:"Identify",seeing:"Identifying",know:"Understand",knew:"Understood",knowing:"Understanding",think:"Analyze",thought:"Analyzed",thinking:"Analyzing",tried:"Attempted",try:"Attempt",trying:"Attempting",learned:"Mastered",learn:"Master",learning:"Mastering",started:"Initiated",start:"Initiate",starting:"Initiating",went:"Proceeded",go:"Proceed",going:"Proceeding",came:"Arrived",come:"Arrive",coming:"Arriving",looked:"Examined",look:"Examine",looking:"Examining",found:"Discovered",find:"Discover",finding:"Discovering"},I=Object.values(R).flat().map(S=>S.toLowerCase()),Q={development:["reducing development time by 30%","improving code quality by 25%","achieving 99.9% uptime","with 95% test coverage","reducing bugs by 40%"],performance:["improving performance by 40%","reducing load time by 50%","handling 10K+ requests/day","reducing latency by 60%","optimizing response time by 45%"],team:["leading a team of 5+ engineers","mentoring 3 junior developers","coordinating with 4 cross-functional teams","across 3 time zones","managing 8+ stakeholders"],cost:["reducing costs by $50K annually","saving 20+ hours weekly","cutting infrastructure costs by 35%","optimizing budget by 25%","reducing operational expenses by 30%"],users:["serving 100K+ users","increasing user engagement by 45%","achieving 95% customer satisfaction","supporting 50K+ daily active users","growing user base by 200%"],delivery:["delivering 2 weeks ahead of schedule","completing 15+ sprints","releasing 10+ features quarterly","with zero production incidents","shipping 5+ major releases"]};class D{static async optimizeResume(e,a,r,i,s="standard"){const c=Date.now(),o=G[s],n=await U.analyzeGaps(e,a,r),l=n.beforeScore;let t=JSON.parse(JSON.stringify(e));const p=[];let f;try{const j=this.detectUserType(e),E=this.resumeDataToText(e);t=await F(E,r,j,e.name,void 0,e.email,e.phone,e.linkedin,e.github,e.linkedin,e.github,i||e.targetRole),(!t.skills||t.skills.length===0)&&e.skills&&e.skills.length>0&&(t.skills=e.skills),(!t.projects||t.projects.length===0)&&e.projects&&e.projects.length>0&&(t.projects=e.projects),(!t.workExperience||t.workExperience.length===0)&&e.workExperience&&e.workExperience.length>0&&(t.workExperience=e.workExperience),(!t.education||t.education.length===0)&&e.education&&e.education.length>0&&(t.education=e.education),(!t.certifications||t.certifications.length===0)&&e.certifications&&e.certifications.length>0&&(t.certifications=e.certifications),p.push({section:"full_resume",changeType:"rewritten",description:"[AI Optimization] Full resume rewritten by Gemini/GPT-4o-mini based on job description"});const z=await V.rewriteResume(t,r,i,j),_=t.skills?JSON.parse(JSON.stringify(t.skills)):null,k=t.projects?JSON.parse(JSON.stringify(t.projects)):null,A=t.workExperience?JSON.parse(JSON.stringify(t.workExperience)):null;if(t=z.rewrittenResume,(!t.skills||t.skills.length===0)&&_&&_.length>0)t.skills=_;else if(t.skills&&_&&_.length>t.skills.length){const C=new Set(t.skills.map(L=>L.category.toLowerCase()));_.forEach(L=>{C.has(L.category.toLowerCase())||t.skills.push(L)})}(!t.projects||t.projects.length===0)&&k&&k.length>0&&(t.projects=k),(!t.workExperience||t.workExperience.length===0)&&A&&A.length>0&&(t.workExperience=A),(!t.skills||t.skills.length===0)&&e.skills&&e.skills.length>0&&(t.skills=e.skills),(!t.projects||t.projects.length===0)&&e.projects&&e.projects.length>0&&(t.projects=e.projects),(!t.workExperience||t.workExperience.length===0)&&e.workExperience&&e.workExperience.length>0&&(t.workExperience=e.workExperience),f={beforeScores:z.beforeScores,afterScores:z.afterScores,overallBefore:z.overallBefore,overallAfter:z.overallAfter,improvement:z.improvement},z.changesApplied.forEach(C=>{p.push({section:C.section,changeType:C.changeType,description:`[${C.parameter}] ${C.description}`,before:C.before,after:C.after})})}catch(j){console.error("AI optimization failed, falling back to legacy optimization:",j);const E=this.cleanGarbageFromSkills(t);p.push(...E);const T=this.optimizeSummary(t,r,n);p.push(...T);const z=this.addMissingKeywords(t,r,n,50);p.push(...z);const _=this.optimizeSkillsSection(t,r);if(p.push(..._),o.rewriteBullets){const K=this.rewriteBullets(t,r,n,30);p.push(...K)}const k=this.enhanceExperienceBullets(t,r);p.push(...k);const A=this.addQuantifiedResults(t);p.push(...A);const C=this.optimizeProjects(t,r);p.push(...C);const L=this.fixRedFlags(t);p.push(...L)}const m={resumeText:this.resumeDataToText(t),resumeData:t,jobDescription:r,extractionMode:"TEXT"},g=await M.calculateScore(m),d=this.identifyUserActionsRequired(g,n,r,t),b=this.buildTierComparison(l.tier_scores,g.tier_scores),h=this.buildBig5Improvements(l.critical_metrics,g.critical_metrics,p),y=l.red_flags.filter(j=>!g.red_flags.some(E=>E.id===j.id)).map(j=>j.name),w=g.red_flags.map(j=>j.name),x=p.filter(j=>j.changeType==="added"&&j.section==="skills").map(j=>j.description.replace("Added keyword: ","").replace(" (JD requirement)","")),u=Date.now()-c;return{optimizedResume:t,beforeScore:l,afterScore:g,scoreImprovement:g.overall-l.overall,tierComparison:b,big5Improvements:h,changesBySection:p,totalChanges:p.length,keywordsAdded:x,keywordMatchBefore:l.missing_keywords_enhanced.length>0?100-l.missing_keywords_enhanced.length*5:100,keywordMatchAfter:g.missing_keywords_enhanced.length>0?100-g.missing_keywords_enhanced.length*5:100,redFlagsFixed:y,redFlagsRemaining:w,optimizationMode:s,processingTime:u,userActionsRequired:d,parameter16Scores:f}}static cleanGarbageFromSkills(e){const a=[];if(!e.skills)return a;let r=0;return e.skills=e.skills.map(i=>{const s=[...i.list],c=i.list.filter(n=>{const l=n.toLowerCase().trim();return!(B.has(l)||l.length<2||l.length>30||n.includes(`
`)||n.includes("  ")||/^(the|a|an|is|are|was|were|be|been|being|have|has|had|do|does|did)\s/i.test(n))}),o=s.length-c.length;return r+=o,{...i,list:c,count:c.length}}).filter(i=>i.list.length>0),r>0&&a.push({section:"skills",changeType:"cleaned",description:`Removed ${r} invalid items from skills`}),a}static addMissingKeywords(e,a,r,i){const s=[],c=q(a),o=r.missingKeywords.filter(u=>u.tier==="critical"||u.tier==="important").map(u=>u.keyword).filter(u=>P(u)),n=[...new Set([...c,...o])];if(n.length===0)return s;e.skills||(e.skills=[]);let l=e.skills.find(u=>u.category.toLowerCase().includes("programming")||u.category.toLowerCase().includes("languages"));l||(l={category:"Programming Languages",count:0,list:[]},e.skills.push(l));let t=e.skills.find(u=>u.category.toLowerCase()==="frontend");t||(t={category:"Frontend",count:0,list:[]},e.skills.push(t));let p=e.skills.find(u=>u.category.toLowerCase()==="backend");p||(p={category:"Backend",count:0,list:[]},e.skills.push(p));let f=e.skills.find(u=>u.category.toLowerCase()==="database");f||(f={category:"Database",count:0,list:[]},e.skills.push(f));let v=e.skills.find(u=>u.category.toLowerCase().includes("cloud")||u.category.toLowerCase().includes("devops"));v||(v={category:"Cloud & DevOps",count:0,list:[]},e.skills.push(v));let m=e.skills.find(u=>u.category.toLowerCase().includes("tools"));m||(m={category:"Tools & Technologies",count:0,list:[]},e.skills.push(m));const g=/^(react|angular|vue|svelte|next|nuxt|gatsby|remix|html|css|sass|scss|less|tailwind|bootstrap|material|chakra|styled|emotion|redux|mobx|zustand|jquery|webpack|vite|rollup|babel)/i,d=/^(node|express|nest|fastify|django|flask|fastapi|spring|\.net|dotnet|rails|laravel|gin|echo|fiber|graphql|grpc)/i,b=/^(mysql|postgresql|postgres|mongodb|redis|elasticsearch|dynamodb|cassandra|sqlite|oracle|firebase|supabase|prisma|sequelize|mongoose)/i,h=/^(aws|azure|gcp|docker|kubernetes|k8s|terraform|ansible|jenkins|ci|github|gitlab|circleci|serverless|lambda|ec2|s3)/i,y=/^(javascript|typescript|python|java|go|golang|rust|ruby|php|swift|kotlin|scala|c\+\+|c#|sql|bash|shell)/i,w=new Set(e.skills.flatMap(u=>u.list.map(j=>j.toLowerCase())));let x=0;return n.forEach(u=>{if(x>=i)return;const j=u.toLowerCase();if(w.has(j))return;let E;y.test(u)?E=l:g.test(u)?E=t:d.test(u)?E=p:b.test(u)?E=f:h.test(u)?E=v:E=m;const T=this.formatSkillName(u);E.list.push(T),E.count=E.list.length,w.add(j),x++,s.push({section:"skills",changeType:"added",description:`Added keyword: ${T} (JD requirement)`,after:T})}),s}static formatSkillName(e){const a=e.toLowerCase();return{javascript:"JavaScript",typescript:"TypeScript",nodejs:"Node.js","node.js":"Node.js",node:"Node.js",reactjs:"React.js","react.js":"React.js",react:"React",vuejs:"Vue.js","vue.js":"Vue.js",vue:"Vue",angularjs:"AngularJS",angular:"Angular",nextjs:"Next.js","next.js":"Next.js",nuxtjs:"Nuxt.js","nuxt.js":"Nuxt.js",nestjs:"NestJS","nest.js":"NestJS",expressjs:"Express.js","express.js":"Express.js",express:"Express",aws:"AWS",gcp:"GCP",azure:"Azure",html:"HTML",html5:"HTML5",css:"CSS",css3:"CSS3",sass:"Sass",scss:"SCSS",sql:"SQL",mysql:"MySQL",postgresql:"PostgreSQL",postgres:"PostgreSQL",mongodb:"MongoDB",redis:"Redis",graphql:"GraphQL",rest:"REST",restful:"RESTful",api:"API",apis:"APIs",docker:"Docker",kubernetes:"Kubernetes",k8s:"Kubernetes",git:"Git",github:"GitHub",gitlab:"GitLab",jira:"Jira",jenkins:"Jenkins",terraform:"Terraform","ci/cd":"CI/CD",cicd:"CI/CD",devops:"DevOps",devsecops:"DevSecOps",agile:"Agile",scrum:"Scrum",kanban:"Kanban",python:"Python",java:"Java",golang:"Go",go:"Go",rust:"Rust",ruby:"Ruby",php:"PHP",swift:"Swift",kotlin:"Kotlin",scala:"Scala","c++":"C++","c#":"C#",".net":".NET",dotnet:".NET",django:"Django",flask:"Flask",fastapi:"FastAPI",spring:"Spring","spring boot":"Spring Boot",rails:"Rails",laravel:"Laravel",tailwind:"Tailwind CSS",tailwindcss:"Tailwind CSS",bootstrap:"Bootstrap",webpack:"Webpack",vite:"Vite",babel:"Babel",eslint:"ESLint",jest:"Jest",cypress:"Cypress",selenium:"Selenium",pytest:"Pytest",junit:"JUnit",figma:"Figma",postman:"Postman",swagger:"Swagger",linux:"Linux",unix:"Unix",bash:"Bash",powershell:"PowerShell",elasticsearch:"Elasticsearch",dynamodb:"DynamoDB",firebase:"Firebase",supabase:"Supabase",kafka:"Kafka",rabbitmq:"RabbitMQ",nginx:"Nginx",apache:"Apache",pandas:"Pandas",numpy:"NumPy",tensorflow:"TensorFlow",pytorch:"PyTorch",jupyter:"Jupyter",tableau:"Tableau","power bi":"Power BI",powerbi:"Power BI",sap:"SAP",salesforce:"Salesforce",servicenow:"ServiceNow"}[a]||e.charAt(0).toUpperCase()+e.slice(1)}static rewriteBullets(e,a,r,i){const s=[];let c=0;if(!e.workExperience)return s;const o=q(a),n={},l=2,t={developed:["built","created","engineered","designed","implemented","constructed"],built:["developed","created","constructed","assembled","established"],created:["designed","developed","built","produced","generated"],implemented:["deployed","executed","established","integrated","introduced"],improved:["enhanced","optimized","boosted","elevated","refined","streamlined"],managed:["led","directed","oversaw","coordinated","supervised","administered"],led:["spearheaded","headed","directed","guided","championed"],analyzed:["evaluated","assessed","examined","investigated","reviewed"],collaborated:["partnered","teamed","cooperated","worked with","joined forces"],optimized:["enhanced","improved","streamlined","refined","fine-tuned"],automated:["streamlined","mechanized","systematized","digitized"],delivered:["shipped","launched","released","completed","executed"],designed:["architected","crafted","devised","formulated","planned"],reduced:["decreased","minimized","cut","lowered","diminished"],increased:["boosted","elevated","raised","expanded","grew"]},p=f=>{const v=f.toLowerCase(),m=n[v]||0;if(m<l)return n[v]=m+1,f;const g=t[v]||[];for(const d of g){const b=n[d]||0;if(b<l)return n[d]=b+1,d.charAt(0).toUpperCase()+d.slice(1)}return n[v]=m+1,f};return e.workExperience.forEach(f=>{!f.bullets||c>=i||(f.bullets=f.bullets.map((v,m)=>{var z,_;if(c>=i)return v;const g=v.toLowerCase();let d=v,b=!1;const h=v.trim().split(/\s+/),y=(z=h[0])==null?void 0:z.toLowerCase(),w=h.slice(0,2).join(" ").toLowerCase();$[y]?(d=p($[y])+d.slice(h[0].length),b=!0):$[w]&&(d=p($[w])+d.slice(h[0].length+1+h[1].length),b=!0);const x=(_=d.trim().split(/\s+/)[0])==null?void 0:_.toLowerCase();if(x&&I.includes(x)&&(n[x]=(n[x]||0)+1),![...I,"achieved","exceeded","surpassed","attained","accomplished","delivered","developed","built","created","designed","implemented","engineered","led","managed","coordinated","directed","supervised","oversaw","optimized","improved","enhanced","streamlined","accelerated","analyzed","evaluated","assessed","identified","researched","collaborated","partnered","facilitated","integrated","automated","deployed","launched","released","shipped","reduced","increased","generated","produced","established","architected","constructed","programmed","coded","tested","maintained","supported","resolved","fixed","debugged","trained","mentored","coached","guided","taught","presented","communicated","documented","reported","wrote","gained","acquired","learned","explored","worked","completed"].some(k=>x===k||(x==null?void 0:x.startsWith(k.slice(0,-2)))||(x==null?void 0:x.startsWith(k.slice(0,-1))))){let k="delivery";/develop|build|creat|implement|design|architect|code|program/i.test(g)?k="development":/lead|team|mentor|manag|coordinat|direct/i.test(g)?k="leadership":/optimi|improv|enhanc|perform|speed|fast|reduc/i.test(g)?k="improvement":/analy|evaluat|assess|investigat|diagnos|identif|research/i.test(g)?k="analysis":/collaborat|partner|coordinat|facilitat|work.*with/i.test(g)&&(k="collaboration");const A=R[k];let C=A[m%A.length];C=p(C),d=`${C} ${d.charAt(0).toLowerCase()}${d.slice(1)}`,b=!0}if(!/\d+%|\$\d+|\d+\s*(users?|customers?|clients?|projects?|team|people|million|k\b|x\b|hours?|days?|weeks?|months?|engineers?|developers?)/i.test(d)){let k="delivery";/develop|build|creat|implement|design|architect/i.test(g)?k="development":/optimi|improv|enhanc|perform|speed|fast/i.test(g)?k="performance":/lead|team|mentor|manag|coordinat/i.test(g)?k="team":/cost|sav|budget|reduc|efficien/i.test(g)?k="cost":/user|customer|client|engag|satisf/i.test(g)&&(k="users");const A=Q[k],C=A[m%A.length];d=`${d.replace(/\.?\s*$/,"")}, ${C}`,b=!0}if(!o.some(k=>g.includes(k.toLowerCase()))&&o.length>0){const k=this.formatSkillName(o[m%o.length]);!d.toLowerCase().includes("using")&&!d.toLowerCase().includes("leveraging")&&!d.toLowerCase().includes("utilizing")&&(d=`${d.replace(/\.?\s*$/,"")} using ${k}`,b=!0)}return!d.endsWith(".")&&!d.endsWith("!")&&(d=d+".",b=!0),d[0]!==d[0].toUpperCase()&&(d=d[0].toUpperCase()+d.slice(1),b=!0),b&&d!==v?(s.push({section:"experience",changeType:"rewritten",description:`Rewritten bullet in ${f.company}`,before:v,after:d}),c++,d):v}))}),s}static enhanceExperienceBullets(e,a){const r=[];if(!e.workExperience)return r;const i=q(a);if(i.length===0)return r;let s=0;return e.workExperience.forEach(c=>{c.bullets&&(c.bullets=c.bullets.map((o,n)=>{const l=o.toLowerCase();if(i.some(m=>l.includes(m.toLowerCase())))return o;const p=i.slice(s%i.length,s%i.length+2);if(p.length===0)return o;const f=/\b(using|with|leveraging|utilizing)\s+[\w\s,]+$/i.test(o);let v=o;if(f){const m=p.map(g=>this.formatSkillName(g)).join(", ");v=`${o.replace(/\.?\s*$/,"")}, ${m}.`}else{const m=n%2===0?"utilizing":"leveraging",g=p.map(d=>this.formatSkillName(d)).join(", ");v=`${o.replace(/\.?\s*$/,"")} ${m} ${g}.`}return s++,v!==o?(r.push({section:"experience",changeType:"modified",description:`Added JD keywords to bullet in ${c.company}`,before:o,after:v}),v):o}))}),r}static optimizeSummary(e,a,r){var f,v,m;const i=[],s=q(a),c=s.slice(0,5).map(g=>this.formatSkillName(g)).join(", "),o=((v=(f=e.workExperience)==null?void 0:f[0])==null?void 0:v.role)||e.targetRole||"Software Engineer",n=Math.max(((m=e.workExperience)==null?void 0:m.length)||1,1),l=!e.workExperience||e.workExperience.length===0||e.workExperience.every(g=>{var d,b,h,y;return((d=g.role)==null?void 0:d.toLowerCase().includes("intern"))||((b=g.role)==null?void 0:b.toLowerCase().includes("trainee"))||((h=g.company)==null?void 0:h.toLowerCase().includes("university"))||((y=g.company)==null?void 0:y.toLowerCase().includes("college"))});let t;l?t=`Motivated ${o} seeking entry-level opportunity to apply skills in ${c||"modern web technologies"}. Strong foundation in software development with hands-on project experience. Eager to contribute to innovative solutions and grow professionally in a dynamic team environment.`:t=`Results-driven ${o} with ${n}+ years of experience specializing in ${c||"modern web technologies"}. Proven track record of delivering scalable solutions, improving system performance by 40%+, and collaborating with cross-functional teams. Strong expertise in full-stack development with a focus on clean, maintainable code and best practices.`;const p=s.filter(g=>{var d;return(d=e.summary)==null?void 0:d.toLowerCase().includes(g.toLowerCase())}).length;return(!e.summary||e.summary.length<100||p<3)&&(i.push({section:"summary",changeType:e.summary?"rewritten":"added",description:`Generated JD-aligned summary with ${s.length} keywords`,before:e.summary||"",after:t}),e.summary=t,e.careerObjective=t),i}static optimizeSkillsSection(e,a){var b;const r=[],i=a.toLowerCase(),s=["javascript","typescript","python","java","c++","c#","go","golang","rust","ruby","php","swift","kotlin","scala","r","sql","bash","shell","perl","lua","dart","html","css"],c=["react","react.js","angular","vue","vue.js","svelte","next.js","nuxt","gatsby","html5","css3","sass","scss","tailwind","bootstrap","material-ui","chakra","redux","jquery"],o=["node.js","nodejs","express","nest.js","django","flask","fastapi","spring","spring boot",".net","rails","laravel","graphql","rest","restful","microservices"],n=["mysql","postgresql","postgres","mongodb","redis","elasticsearch","dynamodb","cassandra","sqlite","oracle","firebase","supabase"],l=["aws","azure","gcp","docker","kubernetes","k8s","terraform","ansible","jenkins","ci/cd","github actions","gitlab","serverless","lambda"],t=["git","github","gitlab","jira","confluence","postman","swagger","vscode","intellij","figma","webpack","vite"],p=["communication","leadership","teamwork","problem-solving","collaboration","analytical","critical thinking","time management","adaptability","agile","scrum"],f=[];e.skills&&e.skills.forEach(h=>{h.list&&f.push(...h.list)});const v=q(a),m={"Programming Languages":[],"Frontend Technologies":[],"Backend Technologies":[],Databases:[],"Cloud & DevOps":[],"Tools & Platforms":[],"Soft Skills":[]},g=new Set;[...f,...v].forEach(h=>{const y=h.toLowerCase().trim();g.has(y)||!h.trim()||(g.add(y),p.some(w=>y.includes(w))?m["Soft Skills"].push(h):s.some(w=>y===w||y.includes(w))?m["Programming Languages"].push(h):c.some(w=>y.includes(w))?m["Frontend Technologies"].push(h):o.some(w=>y.includes(w))?m["Backend Technologies"].push(h):n.some(w=>y.includes(w))?m.Databases.push(h):l.some(w=>y.includes(w))?m["Cloud & DevOps"].push(h):(t.some(w=>y.includes(w))||P(y))&&m["Tools & Platforms"].push(h))}),Object.keys(m).forEach(h=>{m[h].sort((y,w)=>{const x=i.includes(y.toLowerCase()),u=i.includes(w.toLowerCase());return x&&!u?-1:!x&&u?1:0})});const d=Object.entries(m).filter(([h,y])=>y.length>0).map(([h,y])=>({category:h,count:y.length,list:y}));if(d.length>0){const h=((b=e.skills)==null?void 0:b.reduce((w,x)=>{var u;return w+(((u=x.list)==null?void 0:u.length)||0)},0))||0,y=d.reduce((w,x)=>w+x.list.length,0);e.skills=d,r.push({section:"skills",changeType:"rewritten",description:`Reorganized skills into ${d.length} categories (${y} skills total, was ${h})`})}return r}static optimizeProjects(e,a){const r=[];if(!e.projects||e.projects.length===0)return r;const i=q(a);return e.projects.forEach((s,c)=>{!s.bullets||s.bullets.length===0||(s.bullets=s.bullets.map((o,n)=>{var d;const l=o.toLowerCase();let t=o,p=!1;const f=(d=o.trim().split(/\s+/)[0])==null?void 0:d.toLowerCase();if([...I,"achieved","exceeded","surpassed","attained","accomplished","delivered","developed","built","created","designed","implemented","engineered","led","managed","coordinated","directed","supervised","oversaw","optimized","improved","enhanced","streamlined","accelerated","analyzed","evaluated","assessed","identified","researched","collaborated","partnered","facilitated","integrated","automated","deployed","launched","released","shipped","reduced","increased","generated","produced","established","architected","constructed","programmed","coded","tested","maintained","supported","resolved","fixed","debugged","gained","acquired","learned","explored","worked","completed"].some(b=>f===b||(f==null?void 0:f.startsWith(b.slice(0,-2)))||(f==null?void 0:f.startsWith(b.slice(0,-1))))||(t=`${R.development[n%R.development.length]} ${t.charAt(0).toLowerCase()}${t.slice(1)}`,p=!0),!i.some(b=>l.includes(b.toLowerCase()))&&i.length>0){const b=i.slice((n+c)%i.length,(n+c)%i.length+2);if(b.length>0){const h=b.map(w=>this.formatSkillName(w)).join(", "),y=n%2===0?"built with":"using";t=`${t.replace(/\.?\s*$/,"")} ${y} ${h}.`,p=!0}}return t.endsWith(".")||(t=t+".",p=!0),p&&t!==o?(r.push({section:"projects",changeType:"rewritten",description:`Enhanced "${s.title}" bullet ${n+1}`,before:o,after:t}),t):o}))}),r}static addQuantifiedResults(e){const a=[],r=/\d+%|\$\d+|\d+\s*(users?|customers?|clients?|team|people|million|k\b|x\b|hours?|days?|weeks?|months?|engineers?|developers?|projects?|apis?|requests?|transactions?)/i,i=["improving efficiency by 35%","reducing processing time by 40%","achieving 95% accuracy","serving 1,000+ users","with 99.9% uptime","increasing performance by 30%","reducing errors by 50%","handling 5,000+ daily requests","cutting development time by 25%","improving user engagement by 45%","reducing costs by 20%","achieving 90% test coverage"];let s=0;return e.workExperience&&e.workExperience.forEach(c=>{var o;c.bullets=((o=c.bullets)==null?void 0:o.map((n,l)=>{if(r.test(n))return n;let t=i[s%i.length];/develop|build|creat|implement/i.test(n)?t="reducing development time by 30%":/optimi|improv|enhanc|boost/i.test(n)?t="achieving 40% performance improvement":/lead|team|manag|coordinat/i.test(n)?t="leading a team of 5+ engineers":/test|debug|fix|resolv/i.test(n)?t="reducing bugs by 45%":/deploy|releas|launch/i.test(n)?t="with 99.9% uptime":/api|integrat|connect/i.test(n)?t="handling 10,000+ daily requests":/data|analyz|report/i.test(n)?t="processing 5,000+ records daily":/automat|script|pipeline/i.test(n)&&(t="saving 10+ hours weekly");const p=`${n.replace(/\.?\s*$/,"")}, ${t}.`;return a.push({section:"experience",changeType:"modified",description:`Added metrics to work experience bullet ${l+1}`,before:n,after:p}),s++,p}))||[]}),e.projects&&e.projects.forEach(c=>{var o;c.bullets=((o=c.bullets)==null?void 0:o.map((n,l)=>{if(r.test(n))return n;let t=i[s%i.length];/develop|build|creat|implement/i.test(n)?t="reducing development time by 35%":/optimi|improv|enhanc|boost/i.test(n)?t="achieving 50% performance improvement":/design|architect|structur/i.test(n)?t="supporting 1,000+ concurrent users":/test|debug|fix/i.test(n)?t="achieving 95% test coverage":/deploy|host|launch/i.test(n)?t="with 99.9% uptime":/api|integrat|connect/i.test(n)?t="handling 5,000+ API calls daily":/data|analyz|process/i.test(n)?t="processing 10,000+ records":/ui|frontend|interface/i.test(n)?t="improving user engagement by 40%":/backend|server|database/i.test(n)&&(t="reducing query time by 60%");const p=`${n.replace(/\.?\s*$/,"")}, ${t}.`;return a.push({section:"projects",changeType:"modified",description:`Added metrics to project bullet ${l+1}`,before:n,after:p}),s++,p}))||[]}),a}static optimizeEducation(e,a){return[]}static optimizeCertifications(e,a){const r=[];return e.certifications&&(e.certifications=e.certifications.map(i=>i)),r}static fixRedFlags(e){var i;const a=[],r=[[/\s{2,}/g," "],[/^\s+/gm,""],[/\s+$/gm,""],[/\.{2,}/g,"."],[/,{2,}/g,","]];return(i=e.workExperience)==null||i.forEach(s=>{var c;s.bullets=((c=s.bullets)==null?void 0:c.map((o,n)=>{let l=o;return r.forEach(([t,p])=>{l=l.replace(t,p)}),l[0]!==l[0].toUpperCase()&&(l=l[0].toUpperCase()+l.slice(1)),!l.endsWith(".")&&!l.endsWith("!")&&(l=l+"."),l!==o&&a.push({section:"experience",changeType:"modified",description:`Fixed formatting in bullet ${n+1}`,before:o,after:l}),l}))||[]}),a}static identifyUserActionsRequired(e,a,r,i){const s=[],c=e.critical_metrics;return c.quantified_results_presence.percentage<60&&s.push({category:"quantification",priority:"medium",title:"Add More Metrics",description:"Consider adding more specific numbers to your experience.",currentScore:c.quantified_results_presence.percentage,targetScore:90,suggestions:["Add specific percentages","Include team sizes","Mention cost savings"],canAutoFix:!1}),c.experience_relevance.percentage<70&&s.push({category:"experience",priority:"high",title:"Improve Experience Relevance",description:"Your experience needs more alignment with job requirements.",currentScore:c.experience_relevance.percentage,targetScore:90,suggestions:["Add job-specific achievements","Include relevant metrics"],canAutoFix:!1}),s.sort((o,n)=>{const l={critical:0,high:1,medium:2};return l[o.priority]-l[n.priority]})}static detectUserType(e){var s,c,o;const a=((s=e.workExperience)==null?void 0:s.length)||0,r=(c=e.workExperience)==null?void 0:c.some(n=>{var l,t;return((l=n.role)==null?void 0:l.toLowerCase().includes("intern"))||((t=n.company)==null?void 0:t.toLowerCase().includes("intern"))});let i=0;return(o=e.workExperience)==null||o.forEach(n=>{if(n.year){const l=n.year.match(/(\d{4})/g);l&&l.length>=2&&(i+=parseInt(l[1])-parseInt(l[0]))}}),i>=3||a>=2?"experienced":r||a===1?"fresher":"student"}static resumeDataToText(e){const a=[];return a.push(`${e.name}
${e.email} | ${e.phone}`),e.summary&&a.push(`
SUMMARY
${e.summary}`),e.skills&&(a.push(`
SKILLS`),e.skills.forEach(r=>{a.push(`${r.category}: ${r.list.join(", ")}`)})),e.workExperience&&(a.push(`
EXPERIENCE`),e.workExperience.forEach(r=>{var i;a.push(`${r.role} at ${r.company} (${r.year})`),(i=r.bullets)==null||i.forEach(s=>a.push(`• ${s}`))})),e.projects&&(a.push(`
PROJECTS`),e.projects.forEach(r=>{var i;a.push(r.title),(i=r.bullets)==null||i.forEach(s=>a.push(`• ${s}`))})),e.education&&(a.push(`
EDUCATION`),e.education.forEach(r=>{a.push(`${r.degree} - ${r.school} (${r.year})`)})),e.certifications&&e.certifications.length>0&&(a.push(`
CERTIFICATIONS`),e.certifications.forEach(r=>{const i=typeof r=="string"?r:r.title||"";i&&a.push(`• ${i}`)})),a.join(`
`)}static buildTierComparison(e,a){const r=[];return["basic_structure","content_structure","experience","education","certifications","skills_keywords","projects","red_flags","competitive","culture_fit","qualitative"].forEach((s,c)=>{const o=e[s],n=a[s];o&&n&&r.push({tierNumber:c+1,tierName:o.tier_name||s,beforeScore:o.percentage||0,afterScore:n.percentage||0,improvement:(n.percentage||0)-(o.percentage||0),metricsImproved:(n.metrics_passed||0)-(o.metrics_passed||0)})}),r}static buildBig5Improvements(e,a,r){return[{key:"jd_keywords_match",name:"JD Keywords Match"},{key:"technical_skills_alignment",name:"Technical Skills Alignment"},{key:"quantified_results_presence",name:"Quantified Results"},{key:"job_title_relevance",name:"Job Title Relevance"},{key:"experience_relevance",name:"Experience Relevance"}].map(s=>{const c=(e==null?void 0:e[s.key])||{score:0},o=(a==null?void 0:a[s.key])||{score:0};return{metric:s.key,metricName:s.name,beforeScore:c.score||0,afterScore:o.score||0,improvement:(o.score||0)-(c.score||0),changesApplied:r.filter(n=>this.changeAffectsMetric(n,s.key)).map(n=>n.description)}})}static changeAffectsMetric(e,a){var i;return((i={jd_keywords_match:["skills","experience"],technical_skills_alignment:["skills"],quantified_results_presence:["experience"],job_title_relevance:["experience","summary"],experience_relevance:["experience"]}[a])==null?void 0:i.includes(e.section))||!1}}N(D,"TARGET_SCORE_THRESHOLD",90);export{D as EnhancedJdOptimizerService,D as default};
